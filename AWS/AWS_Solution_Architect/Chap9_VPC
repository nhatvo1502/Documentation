VPC - Amazon Virtual Private Cloud 
    - provision a logically isolated section of AWS Cloud
    - a private user defined network
    - user have complete control over this private network: private IP address rage, subnets, route tables and network gateways

    Private IP address:
        -> 10.0.0.0 - 10.255.255.255 (10/8 prefix)
        -> 172.16.0.0 - 172.31.255.255 (172.16/12 prefix)
        -> 192.168.0.0 - 192.168.255.255 (192.168/16 prefix)
    
    Default VS vs Custom VPC
        -> Default VPC is user friendly
        -> All submets in default VPC have a route to internet
        -> EC2 instance has both public and private IP address
    
    VPC Peering - to connect one VPC to another
        -> instance behave as if they were on the same private network
        -> can peer with other AWS account VPC
        -> NO TRANSITIVE PEERING! - no brigding. FOr example:
            A <---> B, B <---> C: B can talk to A and C, but A cannot talk to C and likewise

EXAM TIPS:
-> VPC is logical datacenter in AWS
-> Consist of Internet Gateways (IGWs), Route Tables, Network Access Control Lists, Subnets, and Security Groups
-> 1 Subnet = 1 AZ
-> Security Groups are Stateful, Network Access Control Lists are Stateless
-> NO TRANSITIVE PEERING

LAB PART 1
-> Reserved IPaddress - when creating a new subnets
    10.0.0.0: network address
    10.0.0.1: for VPC router
    10.0.0.2: DNS server
    10.0.0.3: for future use
    10.0.0.255: network broadcast address, AWS doesn't support broad cast in VPC, therefore AWS reserve this address
-> A new VPC comes with: default Route Table (main), Network Access Control List (NACL), default Security Groups
-> A new VPC won't create: Subnets, IGW
-> AZs are randomized

LAB PART2

LAB Part3
-> NAT: Network Address Transmission
-> NAT Gateway
    + Redundant inside AZ
    + Prefered by the enterprise
    + 5Gbps - 45Gbps
-> NAT Instance 
    + disable source/destination check on the instance
    + must be on public subnet

NACL
    -> A NACL can associate with multiple Subnets, but a subnet can only associate with 1 NACL
    -> contain a list of rule, evaluated in order
    -> stateless: inbound/outbound

Load Balancer:
    1. Application Load Balancer
    2. Network Load Balancer
    3. Classic Load Balancer

VPC Flow Logs
    -> capture information about the IP traffic going to and from network interfaces in VPC
    -> using CloudWatch Logs
    -> 3 levels: VPC > Subnets > Network Interface Level (eni)
    -> enable for peered VPC in the same account (cannot with 2 VPC in different accounts)
    -> tags
    -> Once flow logs is set, no after modifications
    -> IP that won't be monitored:
        + Traffic generated by instances when they contact Amazon DS server, unless use your own DNS server
        + traffic generated by Windows instance for Amazon Windows license activation
        + traffic to and from 169.254.169.254 for instance metadata
        + DHCP traffic
        + traffic to reserved IP address for default router

Bastion Host (Jump Box)
    -> securely administer EC2 instances (SSH/RDP) 
    -> Internet Traffic > router > ACL > Nat GW/Instance > Bastion > (SSH/RDP) > Instances

Direct connect
    -> dedicated/privated physical network connection from prem (data center, office, apps) to AWS Cloud Service
    -> low cost, high bandwidth throughput, consistent vs Internet-based connections

    On-prem -> AWS DX -> AWS Cloud

Direct connect Creation
    1. Create a virtual interface in the Direct Connect console: Public Virtual Interface
    2. Go to VPC console > VPN connections > create a Customer Gateway
    3. Create a Virtual Private Gateway
    4. Attach the Virtual Private Gateway
    5. Select VPN Connections and create new VPN Connection
    6. Select the Virtual private Gateway and the Customer Gateway
    7. Once VPN is available, setup the VPN on the customer gateway or firewall

Global Accelerator 
-> a service to improve availability and performance of your applications for local and global users
    Components:
        -> Static IP addresses: AWS provides 2 static IP, user can bring their own
        -> Accelerator:
            + direct traffic to optimal endpoints
            + each Accelerator includes one or more Listeners
        -> DNS Name:
            + random. Ex: a1234.awsglobalaccelerator.com
            + point to provided static IP addresses
            + can be setup to route traffic using custom Domain Name
        -> Network Zone: 
            + similar to AZ, a network zone is an isolated unit with physical infrastructure
            + service static IP address
            + One IP down, traffic will be routed to another IP from a healthy isolated Network Zone
        -> Listener:
            + processes inbound connections from Client -> Global Accelerator based on port (or port range) + configured protocol
            + Global Accelerator supports TCP + UDP
            + Each Listener has one or more Endpoint Groups
        -> Endpoint Groups:
            + each Endpoint associate with an AWS region
            + Endpoint Groups = one ore more endpoints in the Region
            + Traffic Dial = distribute traffic to Endpoints according to their weight percentage
            + Traffic Dial provide performance testing or blue/green deployment testing for new releases across different AWS Region
        -> Endpoint:
            + Endpoint can be eight: NLB, ALB, EC2 Instances, or Elastic IP addresses
            + If Endpoint = ALB, can be internet-facing (public) or internal (private)
            + Endpoint Weight: numbers of traffic proportion to route to each Endpoint
     
