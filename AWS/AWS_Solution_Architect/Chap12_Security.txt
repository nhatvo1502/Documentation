
Bad Actors
    -> NACL to block IP address (layer 4)
    -> Host-based firewall - run on EC2
    -> ALB will terminate bad IP before NACL 
    -> WAF - Web Application Firewall attached to ALB (layer 7)
        + block or allow IP address
        + sql injection
    -> Can also attach WAF to CloudFront
        + because NACL is sit behind CloudFront, where CloudFront will send different IP (not origin IP)
    -> CloudFront Geo Match

KMS - Key Management Service - key management + encryption + decryption
-> Regional
-> Customer master keys (CMKs)
-> S3 objects, databases password, API keys
-> encrypt/decrypt data up to 4KB
-> pay per API call
-> audit with CloudTrail
-> FIPS 140-2 level 2
-> HSM level 3

        CMK
        ===========================================================================
                            Can view        Can Manage      Dedicated to My Account
        Customer Manage     yes             yes             Yes
        AWS Managed CMK     yes             no              Yes
        AWS Owned CMK       no              yes             no

                    Symmetric                   Asymmetric
        ===========================================================================
        Same key used for encrypt/decrypt       public/private key pair
        Never leaves AWS unencrypted            Private key never leaves AWS unencrypted
        AWS-256                                 RSA and ECC (Elliptic-curve cryptography)
        call KMS API to use                     call KMS API to use private key
        AWS service integrated with KMS         Download public key to use outside AWS
        Import your own key material            AWS services integrated with KMS do not support asymmetric CMKs

CloudHSM
-> Dedicated hardware security module HSM
-> FIPS140-2 Level 3
-> Level 2 is KMS
-> Manage your own keys
-> No access to the AWS-managed component.
-> Run within a VPC
-> Single tenant, dedicated hardware, multi-AZ cluster
-> Industry-standard APIs- no AWS API
-> PKCS#11
-> Java Cryptography Extensions (JCE)
-> Microsoft CryptoNG (CNG)

EXAM TIPS
-> USE HSM IF:
    -> Regulatory compliance requirements
    -> FIPS 140-2 Level 3

System Manager Parameter Store
    Parameter Store
        -> component of AWS systems Manager (SSM)
        -> secure serverless storage for configuration and secrets:
            + Passwords
            + Database connection strings
            + License codes
            + API keys
        -> Values can be stored encrypted (KMS) or plaintext
        -> seperate data from source control
        -> hierachies
        -> track versions
        -> set TTL expires on valuesff

    Organizing Parameters into Herarchies
        -> 15 level deeps
        -> grant permission on folder level or object level
        -> path

    Integrate with CloudFormation

Secrets Manager
-> Similar to System Manager Parameter Store
-> Charge per secret stored and per 10,000 API calls
-> Automatically rotate secrets
-> Apply the new key/password in RDS for you 
-> Henerate random secrets 

AWS Shield
-> Protects against distributed deniel-of-service (DDoS) attacks

    AWS Shield Standard             AWS Shield Advanced
    ====================     vs     =======================
    Free                            $3000 oer month per Organizing
    layer 3, 4                      Enhanced protection for EC2, ELB, Cloudfront, Global Accelerator, Route53
    SYN/UDP floods                  Business and Enterprise Support 24x7 to DDoS Response Team distributed
    reflection attacks              DDoS cost protection
    proven                       

WAF
    Web Application Firewall
    Monitor HTTP(S) requests to CloudFront, ALB, or API Gateway
        -> Control access to content
        -> configure filtering rules to allow/deny traffic:
            + IP
            + query string parameters
            + SQL query injection
        -> Blocked traffic returns HTTP 403 forbidden

    Allow all request, except specify
    Block all request, except specify
    Count the request that match the properties you specify
    Request properties:
        -> Originating IP address (block by ip)
        -> Originating country (block by country)
        -> Request size (block by size)
        -> Values in request headers (block vy value in headers)
        -> strings in request matching regular expressions (regex) patterns (block by pattern in string)
        -> SQL code (injection)
        -> cross-site scripting XSS

AWS Firewall Manager
    Centrally configure and manage firewall rules across an AWS organization
    -> WAF rules:
        + ALB
        + API Gateway
        + CloudFront
    -> AWS Shield Advanced protections:
        + ALB
        + ELB Classic
        + EIP
        + CloudFront distributions
    -> Enable security groups for EC2 and ENIs