Identity and Access Management 101

    S3 Select - 
        - used to retrieve only a subset of data 400% faster, 80% cheaper
        - get data by rows/columns using simple SQL expressions
        - save money on data transfer
        How: use a simple SQL expression to return only the data from a stored object
            instead of retrieving/processing the entitre object
        Before: CSV > download > decompressed > process
        Now: CSV > S3 > S3 select

    Glacier Select - 
        - allow to run sql expression direct on Glacier tier storage

    Sharing S3 Bucket across accounts - 
        3 Ways:
            Across-account IAM Roles (Programatic + Console access)
            Bucket Policies and IAM apply for entire bucket (Programmatic)
            Bucket ACLs and IAM apply for individual objects (Programmatic)
    
    Cross-Region Replication
        - Versioning must be enable on both source and target bucket
        - existing files in source bucket are not replicated automatically
        - delete markers are not replicated
        - deleting individial versions are not replicated
        - Cross-region Rep is at high level

    S3 Transfer Acceleration
        - utilize CloudFront to upload file to S3
        - provide a URL instead of upload directly
        - S3 Transfer Acceleration Tool

    AWS Data Sync
        - To move large amount of data from prem to AWS
        - NFS and SMB compatible file system
        - Replaction can be done hourly, daily, weekly
        - Install DataSync Agent on client to start Replication
        - Can be use to replicate EFS to EFS between 2 EC2 instances

    CloudFront
        - can be used to deliver entire website, streaming, etc using
            global network of edge locations
        Edge Location - 
            - location where content will be cached
            - can be READ and WRITE also
        Origin - 
            - originin of all files CDN distributes
            - can be either S3, EC2, ELB, or Route53
        Content Delivery Network (CDN) - system of distributed servers (networks)
            that deliver webpages and other web content to a user based on the
            geographic locations of the user, origin of the webpage, 
            and a content delivery servers
        Distribution - 
            - the name given the CDN
            - collection of Edge locations
            Web Distribution - used for website
            RTMP Distribution (Real-time messaging protocol) - used for Media Streaming
        TTL (Time To Live) - time that objects can live in cache
        Invalidating the cached - delete objects from CloudFront's Origin

Billing Alarm

S3
    What make of the cost:
        Storage
        Request and Data retrievals
        Data transfer
        Management & Replication

    Pricing Tiers:
        S3 Standard
        S3 IA
        S3 One Zone IA - same as IA without replication
        S3 Intelligent Tiering - combine Standard with IA + monitoring $.0025 per 1000 objects
        S3 Glacier
        S3 Glacier Deep Archive

    Security:
        Bucket Policies - bucket level
        Access Control Lists - object level
        S3 can create log of request made to S3 bucket, can be send/stored 
            on another bucket in same/another account

    Encryption:
        Encryption in transit - middle man attack, SSL/TLS
        Encryption at rest (Server Side) -
            S3 Managed Keys - SSE-S3
            AWS Key Management Service - SSE-KMS
            Customer Provided Keys - SSE-C
        Encryption at rest (Client Side)

    Versioning 
        Store all versions as an object (even deleted object)
        Once enabled, Versioning cannot be disabled, only suspended
            After suspended, all object versions still there, not deleted
        Integreates with Lifecycle rules
        MFA delete

    Lifecycle - 
        Bucket > Management > Lifecycle
        Automate moving objects between storage Tiers
        Apply for current and previous version of the object

    Object Lock
         WORM - Write Once Read Many
            prevent object from being deleted or modified for fix amount of time or indefinitely
        Modes:
            Gorvenance - lock object for all users except for those who has permission
            Compliance - lock object for all users no exception for a Retention Period's amount of time
            Retention Period - protects object version for a fixed time
            Legal hold - protects object until removed, can be change with S:PutObjectLegalHold

    Glacier Vault Lock - Lock object inside Glacier

    S3 Performance
        Prefix - path between bucket name and file name
            \\mybucket\folder1\subfolder1\hello.py      Prefix = \folder1\subfolder1
            Each prefix handles high number of requests 
            Spreading read across different prefixes
        KMS limites
            Upload/download count toward KMS quota
            Region specific quota
            Cannot increase quota
        S3 byte-range fetches to increase performance when download

Signed URL and Cookies
    - use when you want to secure content so that only
        authorized people can access it
    Cloud Front:
        - Use if Origin is or isn't S3 (EC2, Route53,etc)
        - Signed URL - for individual files
        - Cookies - for multiple files (Netflix, HBO max)
        - Policy:
            - URL expiration
            - IP ranges
            - Trusted signers (which aws account can create signed URLs)
    S3:
        - Use if Origin is on S3
        - For people who access direct access to S3
        - Limited life time
    
Snowball
    - petabyte-scale data transport solution 
    - use secure appliances to transfer in and out aws
    - simple, fast, secure, cost-effective (1/5 cost of highspeed)
    How:
        - comes with 50 or 80TB
        - Data protection: tamper protection
    AWS Snowball Edge:
        - 100TB data transfer device with storage and compute capabilities
        - remote workloads or offline location
        - can connect to existing apps/infra
        - can cluster together
    AWS Snowmobile:
        - Exabyte-scale data transfer service (semi-truck with containers of storage)
        - 100PB per Snowmobile

Storage Gateway
    - virtual or physical device to connect on-prem data center to AWS
    Software (Virtual): VMware ESXi, Hyper-V
    Types:
        - File Gateway (NFS & SMB): 
            - Store flat file directly to S3
        - Volume Gateway (iSCSI): 
            - Store volume: Store entire data set(volume) on site
                and asynchronously backup to to S3
            - Cached volume: Store entire data set (volume) on S3
                and most frequently accessed data is cached on site
        - Tape Gateway (VTL): Virtual tape library

Athena
    - interactive query service run agaisnt S3 to query data
    - serverless, charge by query, no server setup (like lambda)
    - commonly used to analyse log data stored in S3

Macie
    - uses AI to analyze data in S3 to identify PII
    - used to analyse CloudTrail logs for suspicous API activity
    - has Dashboards, Reports and Alerting
    - great for PCI-DSS compliance, ID theft
    PII: Personally Identifiable Information
    PCI-DSS: Payment Card Industry - Data Security Standard