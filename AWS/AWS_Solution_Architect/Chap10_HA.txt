Load Balancer
    -> Balance load between instance 
    1. Application Load Balancer:
        -> HTTP. HTTPD traffic
        -> operate layer 7
    2. Network Load Balancer:
        -> TCP traffic
        -> operate layer 4
        -> extreme performance require
        -> millions of requests per second, ultra-low latencies
    3. Classic Load Balancers
        -> Legacy Elastic Load Balancer
        -> Layer 7 http/https
        -> Layer 4 on application use TCP
        -> Not application aware
        -> Error 504: Gateway timeout

X-Forwarded-For Header
                Load Balancer
    User's IP ----------------> Load Balancer's IP
    -> X-Forwarded-For Header will help retrieving User's IP after it pass Load Balancer to the Application

Sticky Session: send users traffic to one EC2 instance only

Cross Zone Load Balancing: Load Balancer can talk to each other and send traffic to each other's instances

Path Patterns: listener with rules to forwards requests based on URL Path
    -> forward www.myurl.com to instance A, B, C, D
    -> forward www.myurl.com/image to instance E, F

Auto Scaling
    -> 3 Components:
        1. Groups: logical component. Webserver group/Application Group/Database group/Application
        2. Configuration Templates: 
        3. Scaling Options:
            + Maintain current instance levels at all time
            + Scale manually
            + Scale base on schedule
            + Scale based on demand (base on resouce, workload, traffic)
            + Predictive scaling (predict on last performance)

HA Architecture
    -> design for failure
    -> Multi-AZ = DR, Read Replicas = Performance (RDS)
    -> scaling out = ASG, scaling up = increase resource (t2 -> t3)
    -> cost element

CloudFormation
    -> a way of completely scripting your coud environment
    -> quickstart is built-in CloudFormation templates

Elastic Beanstalk
    -> quickly deploy and manage applications in AWS cloud without worrying about infrastructure
    -> automatical handle: defails of capacity, provisioning, load balancing, scaling and application health monitoring

On-prem AWS service can run:
    1. Database Migration Service (DMS)
        + Allow to move on-prem databases to and from AWS
        + DR environment in AWS where prem is primary
        + Homogenous vs heterogeneous migration
    2. Server Migration Service (SMS)
        + incremental replication of on-prem to AWS
        + backup tool, multi-site strategy, DR tool
    3. AWS Application Discovery Service
        + help enterprise customers plan migration
        + install AWS Application Discovery Agentless Connector as virtual appliance on VMware vCenter
        + build a server utilization map and dependency map
        + collected data is retained in encrypted format in AWS Application Discovery Service data store -> can be 
            export as CSV file to estimate the TCO
    -> VM Import/Export
        + Migrate existing application to EC2
        + create DR strategy on AWS or use AWS as second site
        + can export AWS VMs to on-prem
    -> Download Amazon Linux 2 as an ISO

EXAM TIPS
-> 3 types of Load Balancers
    1. ALB - Layer 7 aware
    2. NLB - Extreme performance, static IP address, Layer 4
    3. CLB - Cheap, no application aware
-> 5.4 Error = gateway time out, ELB is fine
-> X-Forwarded-For header
-> Load Balance have their own DNS name, not IP address
-> Sticky Sessions
-> Cross Zone Load Balancing
-> Path patterns 
-> CloudFormation
-> quickstart
-> Elastic Beanstalk
-> Bastion
    + scenario 1: 2 bastions, 2 AZs, 1 NLB (no down time, but costly)
    + scenario 2: 1 bastion, 2 AZs, 1 ASG, 1 EIP (some downtime, cheaper)